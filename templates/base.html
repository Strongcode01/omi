<!-- base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}OMI Marketplace{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

  {% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/product_list.css' %}">
  <link rel="stylesheet" href="{% static 'css/cart_detail.css' %}">
  {% endblock %}

</head>

<body>
  <!-- Cart Modal Overlay -->
  <div id="cart-modal" style="
      position: fixed; top:0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.6);
      display: none; /* hidden by default */
      align-items: center; justify-content: center;
      z-index: 2000;
    ">
    <div style="
        background: rgba(0,0,0,0.9);
        border: 2px solid var(--omi-neon-blue);
        border-radius: 12px;
        width: 90%; max-width:600px;
        max-height:80%; overflow-y:auto;
        box-shadow: 0 0 12px var(--omi-neon-pink);
        padding:1rem; position: relative;
      ">
      <button id="cart-close" style="
          position: absolute; top:0.5rem; right:0.5rem;
          background: var(--omi-neon-pink); border:none;
          color:#000; font-size:1.2rem; width:2rem; height:2rem;
          border-radius:50%; cursor:pointer;
        ">Ã—</button>

      {% include 'cart/_cart_modal.html' %}
    </div>
  </div>

  <!-- Cart Toggle Button -->
  <button id="cart-open" style="
      position: fixed; top:1rem; right:1rem;
      background: var(--omi-neon-blue); border:none;
      color:#000; padding:0.5rem 1rem; border-radius:4px;
      box-shadow:0 0 6px var(--omi-neon-blue); cursor:pointer;
      z-index:1000;
    ">
    Cart
  </button>

  <header class="header">
    <div class="header-columns">
      <div class="header-column">
        <img src="{% static 'images/omi_logo_rounded.png' %}" alt="Optimal Market Logo" class="header-logo" height="150px" width="150px">
      </div>
      <nav class="header-column">
        <ul>
          <li><a href="{% url 'pages:home' %}">Home</a> |</li>
          <li><a href="{% url 'products:product_list' %}">Products</a> |</li>
          <li><a href="{% url 'pages:services' %}">Services</a> |</li>
          <li><a href="{% url 'pages:contact_us' %}">Contact</a> </li>
        </ul> 
      </nav>

      <div class="header-column">
        {% if user.is_authenticated %}
        <ul>
          <li><a href="{% url 'accounts:logout' %}">â†ª</a>|</li>
        {% else %}
          <li><a href="{% url 'accounts:login' %}">Login</a> |</li>
          <li><a href="{% url 'accounts:signup' %}">Register</a>|</li>
        {% endif %} 
          <li><a href="{% url 'cart:cart_detail' %}">ðŸ›’</a>|</li>
        </ul>
        <button id="cart-open" style="
        position: fixed; top:1rem; right:1rem;
        background: var(--omi-neon-blue); border:none;
        color:#000; padding:0.5rem 1rem; border-radius:4px;
        box-shadow:0 0 6px var(--omi-neon-blue); cursor:pointer;
        z-index:1000;
      ">
      Cart
    </button>
      </div>
      
    </div>
    
  </header>
  {% include 'includes/sidebar.html' %}
  <main>
    {% block content %}{% endblock %}
  </main>

  <footer class="footer">
    <div class="footer-columns">
      <!-- Column 1: Logo -->
      <div class="footer-column">
        <img src="{% static 'images/omi_logo_rounded.png' %}" alt="Optimal Market Logo" class="footer-logo">
        <p>Connecting farmers to buyers with quality and transparency.</p>
      </div>
  
      <!-- Column 2: Quick Links -->
      <div class="footer-column">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="{% url 'products:product_list' %}">Shop Products</a></li>
          <li><a href="{% url 'accounts:signup' %}">Sign Up</a></li>
          <li><a href="{% url 'accounts:login' %}">Login</a></li>
        </ul>
      </div>
  
      <!-- Column 3: Support -->
      <div class="footer-column">
        <h4>Support</h4>
        <ul>
          <li><a href="#">FAQs</a></li>
          <li><a href="#">Shipping Info</a></li>
          <li><a href="#">Refund Policy</a></li>
          <li><a href="#">Live Chat</a></li>
        </ul>
      </div>
      <!-- Column 4: Support -->
      <div class="footer-column">
        <h4>Support</h4>
        <ul>
          <li><a href="#">FAQs</a></li>
          <li><a href="#">Shipping Info</a></li>
          <li><a href="#">Refund Policy</a></li>
          <li><a href="#">Live Chat</a></li>
        </ul>
      </div>
    </div>
  
    <!-- bottom bar (full width) -->
    <div class="footer-bottom">
      <p>&copy; {{ now.year }} Optimal Market Innovations.  All rights reserved.</p>
    </div>
  </footer>


  <script src="{% static 'js/app.js' %}" defer></script>
  {% block extra_js %}
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="{% static 'js/product_list.js' %}"></script>
  <script>
    const modal = document.getElementById('cart-modal');
      document.getElementById('cart-open').addEventListener('click', () => {
        modal.style.display = 'flex';
      });
      document.getElementById('cart-close').addEventListener('click', () => {
        modal.style.display = 'none';
      });
      modal.addEventListener('click', e => {
        if (e.target === modal) modal.style.display = 'none';
      });
  </script>
  {% endblock %}
</body>
</html>